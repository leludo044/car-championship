<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="victoryCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
	select driver.name as name, sum(!isnull(resultats.place)) as count from race 
	join resultats on resultats.idGrandPrix = race.id and resultats.place=1 right 
	join driver on driver.id = resultats.idPilote 
	group by driver.name 
	order by count desc;
	]]>
	</sql-query>

	<sql-query name="filteredVictoryCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
	select driver.name as name, sum(!isnull(resultats.place)) as count from race 
	join championnats on championnats.id = race.championshipId and race.championshipId = :id 
	join resultats on resultats.idGrandPrix = race.id and resultats.place=1 right 
	join driver on driver.id = resultats.idPilote 
	group by driver.name 
	order by count desc;
	]]>
	</sql-query>
	
	<sql-query name="podiumCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
    select driver.name as name, sum(!isnull(resultats.place)) as count from race
    join resultats on resultats.idGrandPrix = race.id and resultats.place >=1 and resultats.place <=3 right 
    join driver on driver.id = resultats.idPilote 
    group by driver.name 
    order by count desc;
	]]>
	</sql-query>

	<sql-query name="filteredPodiumCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
	select driver.name as name, sum(!isnull(resultats.place)) as count from race
	join championnats on championnats.id = race.championshipId and race.championshipId = :id
	join resultats on resultats.idGrandPrix = race.id and resultats.place >=1 and resultats.place <=3 right
	join driver on driver.id = resultats.idPilote
	group by driver.name 
	order by count desc;
	]]>
	</sql-query>
	
	<sql-query name="poleCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
	select driver.name as name, sum(!isnull(resultats.place)) as count from race 
	join resultats on resultats.idGrandPrix = race.id and resultats.grille=1 right 
	join driver on driver.id = resultats.idPilote 
	group by driver.name 
	order by count desc;
	]]>
	</sql-query>

	<sql-query name="filteredPoleCount">
		<return-scalar column="name" type="string" />
		<return-scalar column="count" type="integer" />
	<![CDATA[
	select driver.name as name, sum(!isnull(resultats.place)) as count from race 
	join championnats on championnats.id = race.championshipId and race.championshipId = :id 
	join resultats on resultats.idGrandPrix = race.id and resultats.grille=1 right 
	join driver on driver.id = resultats.idPilote 
	group by driver.name 
	order by count desc;
	]]>
	</sql-query>
</hibernate-mapping>