<h2>Gestion des championnats</h2>
<div class="row">
	<div class="col-md-12">
		<div class="panel panel-primary">
			<div class="panel-heading">
				<div class="panel-title">Liste des championnats</div>
			</div>
			<div class="panel-body">
				<form>
					<table class="table table-hover">
						<thead>
							<tr>
								<th>#</th>
								<th>Nom</th>
								<th>Type</th>
								<th width="100em" />
							</tr>
						</thead>
						<tbody>
							<tr data-ng-repeat="championnat in championnats">
								<td ng-click="selectionner(championnat, $index)">{{championnat.id}}</td>
								<td ng-click="selectionner(championnat, $index)">{{championnat.name}}</td>
								<td>{{championnat.type}}</td>
								<td><span class="glyphicon glyphicon-flag"
									aria-hidden="true" title="Affecter les circuits"
									ng-click="selectionnerCircuits(championnat, $index)"></span></td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td></td>
								<td><input type="text" class="form-control" id="nom"
									placeholder="name" ng-model="form.name"></td>
									<td><input type="text" class="form-control" id="type"
									placeholder="type" ng-model="form.type"></td>
								<td>
									<button type="submit" class="btn btn-default"
										ng-click="ajouter()" ng-hide="selection">
										<span class="glyphicon glyphicon-plus" aria-hidden="true"
											title="Ajouter"></span>
									</button>
									<button type="submit" class="btn btn-default"
										ng-click="modifier()" ng-show="selection">
										<span class="glyphicon glyphicon-ok" aria-hidden="true"
											title="Modifier"></span>
										<button type="submit" class="btn btn-default"
											ng-click="supprimer()" ng-show="form.supprimable">
											<span class="glyphicon glyphicon-remove" aria-hidden="true"
												title="Supprimer"></span>
										</button>
									</button>
								</td>
							</tr>
						</tfoot>
					</table>
				</form>
			</div>
		</div>
	</div>
</div>
<div class="alert alert-success" role="alert" ng-show="message">{{message}}</div>
<table class="table table-hover" ng-show="selected">
	<thead>
		<tr>
			<th>#</th>
			<th>Nom</th>
			<th>Longueur</th>
			<th>Pays</th>
			<th>Date</th>
			<th />
		</tr>
	</thead>
	<tbody>
		<tr data-ng-repeat="track in tracks" 
		ng-class="{'success' : selectedTracks[$index].selected}">
			<td ng-click="onSelect(track, $index)">{{track.id}}</td>
			<td ng-click="onSelect(track, $index)">{{track.name}}</td>
			<td ng-click="onSelect(track, $index)">{{track.length}}</td>
			<td ng-click="onSelect(track, $index)">{{track.country.name}}</td>
			<td><input type="text" class="form-control"
									id="raceDate" placeholder="Race date"
									ng-model="selectedTracks[$index].date"
									 ng-show="selectedTracks[$index].selected" /></td>
<td>									 
									<button type="submit" class="btn btn-default" ng-show="selectedTracks[$index].selected"
									ng-click="onValid(track, selectedTracks[$index].date, $index)">
										<span class="glyphicon glyphicon-ok" aria-hidden="true"
											title="Modifier"></span>
											</button>
									<button type="button" class="btn btn-default" data-toggle="modal"
									data-target="#resultsModal">
										<span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"
											title="Modifier"></span>
											</button>
									 </td>
		</tr>
	</tbody>
</table>

<!-- Modal -->
<div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-ng-controller="ResultCtrl">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Sasie des résultats</h4>
      </div>
      <div class="modal-body">
					<table class="table table-hover">
						<thead>
							<tr>
								<th>#</th>
								<th>Prénom</th>
								<th>Départ</th>
								<th>Arrivée</th>
								<th>Points</th>
							</tr>
						</thead>
						<tbody>
							<tr data-ng-repeat="driver in drivers">
								<td>{{driver.id}}</td>
								<td>{{driver.name}}</td>
								<td><input type="number" name="start" /></td>
								<td><input type="number" name="end" /></td>
								<td></td>
							</tr>
						</tbody>
						</table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
        <button type="button" class="btn btn-primary">Enregistrer</button>
      </div>
    </div>
  </div>
</div>